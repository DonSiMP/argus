<launch>
  <node pkg="v4l2_cam" type="camera_node" name="camera">
    <rosparam>
      camera_name: vo_cart_pseye
      device_path: /dev/video1
      frame_resolution: [320, 240]
      frame_rate: 125
      camera_info_url: file:///home/humphreh/.ros/camera_info/vo_cart_pseye.yaml
      controls:
        horizontal_flip:
          id: 9963796
          value: 0
        vertical_flip:
          id: 9963797
          value: 0
        sharpness: #0-63, (0 is no blur, 63 is max blur)
          id: 9963803
          value: 0
        auto_exposure:
          id: 10094849
          value: 0
        #exposure: #0-255
          #id: 9963793
          #value: 0
        power_line_freq:
          id: 9963800
          value: 0
        auto_gain:
          id: 9963795
          value: 1
        #gain: #0-63
          #id: 9963795
          #value: 0
        auto_white_balance:
          id: 9963788
          value: 1
        #brightness:
          #id: 993776
          #value: 0
        #contrast: #0-255
          #id: 9963777
          #value: 0
        #saturation: #0-255
          #id: 9963778
          #value: 0
        #hue: #-90-90
          #id: 9963779
          #value: 0
    </rosparam>
  </node>
  
  <node pkg="odoflow" type="visual_odometry_node" name="vo_node" output="screen">
    <remap from="image_raw" to="/camera/image_raw" />
    <rosparam>
      show_output: true
      redetection_threshold: 40
      #detector:
        #type: FAST
        #intensity_threshold: 40
        #enable_non_maximum_suppression: true
        #max_num_points: 50
        #detector_type: FAST_7_12
      detector:
        type: corner
        max_num_points: 40
        min_quality: 0.01
        min_separation: 10
        block_size: 3
        window_size: 10
        use_harris: false
        refine_enable: true
        refine_max_iters: 20
        refine_min_eps: 0.03
      #detector:
        #type: fixed
        #grid: [6,6]
      tracker:
        type: lucas_kanade
        max_iters: 10
        min_eps: 0.001
        window_size: [51, 51]
        eigenvalue_threshold: 0.001
      estimator:
        type: five_point
        desired_confidence: 0.99
        outlier_threshold: 0.001
        method: RANSAC
        output_scale: 0.04
      #estimator:
        #type: rigid
        #output_scale: 0.1
    </rosparam>
  </node>
</launch>
